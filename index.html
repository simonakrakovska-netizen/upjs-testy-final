<!DOCTYPE html>
<html lang="sk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>UPJŠ BioChem Testy</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#0b2a6b;
      --card:#0f1730cc;
      --card2:#0f1730;
      --text:#eaf0ff;
      --muted:#b8c6ff;
      --accent:#3b82f6;
      --accent2:#60a5fa;
      --good:#22c55e;
      --bad:#ef4444;
      --warn:#f59e0b;
      --border:#22305d;
      --shadow: 0 18px 40px rgba(0,0,0,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Helvetica Neue", sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% -10%, rgba(96,165,250,.35), transparent 60%),
        radial-gradient(800px 500px at 95% 10%, rgba(59,130,246,.25), transparent 55%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      min-height:100vh;
      padding:18px 14px 40px;
    }
    .wrap{max-width:980px;margin:0 auto}
    .topbar{
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      padding:14px 16px;
      border:1px solid rgba(255,255,255,.08);
      background:linear-gradient(180deg, rgba(15,23,48,.78), rgba(15,23,48,.55));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      position: sticky; top: 10px; z-index: 10;
      backdrop-filter: blur(10px);
    }
    .brand{
      display:flex; gap:12px; align-items:center; min-width: 0;
    }
    .logo{
      width:42px;height:42px;border-radius:14px;
      background: radial-gradient(circle at 30% 30%, rgba(96,165,250,.9), rgba(59,130,246,.55));
      border:1px solid rgba(255,255,255,.18);
      display:grid; place-items:center;
      box-shadow: 0 12px 25px rgba(59,130,246,.25);
      flex:0 0 auto;
    }
    .logo span{font-weight:800; letter-spacing:.5px}
    .brand h1{
      font-size:16px; margin:0; line-height:1.15; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .brand p{
      margin:0; font-size:12px; color:var(--muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    .pill{
      display:inline-flex; gap:10px; align-items:center;
      padding:8px 10px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      border-radius: 999px;
      color: var(--text);
      font-size: 12px;
    }
    .toggle{
      display:flex; align-items:center; gap:8px;
      user-select:none;
    }
    .switch{
      width:44px; height:26px; border-radius:999px;
      border:1px solid rgba(255,255,255,.20);
      background: rgba(0,0,0,.25);
      position:relative;
      flex:0 0 auto;
    }
    .knob{
      width:22px; height:22px; border-radius:999px;
      background: linear-gradient(180deg, #fff, #cfe0ff);
      position:absolute; top:1px; left:1px;
      transition: all .2s ease;
      box-shadow: 0 10px 20px rgba(0,0,0,.35);
    }
    .switch.on{ background: rgba(59,130,246,.35); }
    .switch.on .knob{ left: 21px; }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:14px;
      margin-top:14px;
    }
    @media(min-width:900px){
      .grid{ grid-template-columns: 380px 1fr; align-items:start;}
    }

    .card{
      border:1px solid rgba(255,255,255,.10);
      background: linear-gradient(180deg, rgba(15,23,48,.80), rgba(15,23,48,.55));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
    }
    .card .hd{
      padding:14px 16px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .card .hd h2{margin:0; font-size:14px}
    .card .bd{padding:14px 16px}

    .btn{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 12px;
      cursor:pointer;
      font-weight:600;
      transition: transform .06s ease, background .15s ease, border .15s ease;
    }
    .btn:hover{ background: rgba(255,255,255,.10); }
    .btn:active{ transform: translateY(1px); }
    .btn.primary{
      background: linear-gradient(180deg, rgba(59,130,246,.95), rgba(37,99,235,.95));
      border-color: rgba(255,255,255,.18);
      box-shadow: 0 16px 30px rgba(59,130,246,.25);
    }
    .btn.primary:hover{ filter: brightness(1.04); }
    .btn.ghost{ background: transparent; }
    .btn.danger{ background: rgba(239,68,68,.16); border-color: rgba(239,68,68,.35); }
    .btn.good{ background: rgba(34,197,94,.16); border-color: rgba(34,197,94,.35); }
    .btnRow{ display:flex; gap:10px; flex-wrap:wrap; }

    .list{
      display:flex; flex-direction:column; gap:8px;
    }
    .item{
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding:10px 12px;
      border-radius: 14px;
      cursor:pointer;
      transition: background .15s ease, border .15s ease;
    }
    .item:hover{ background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.16); }
    .item .t{ font-weight:700; font-size:13px; }
    .item .s{ font-size:12px; color: var(--muted); }

    .crumbs{ font-size:12px; color: var(--muted); }
    .crumbs b{ color: var(--text); }

    .progress{
      height:10px; border-radius:999px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .bar{
      height:100%;
      width:0%;
      background: linear-gradient(90deg, rgba(96,165,250,.95), rgba(59,130,246,.95));
      transition: width .2s ease;
    }

    .qTitle{ margin:0 0 8px; font-size:15px; line-height:1.35; }
    .metaRow{ display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap; margin: 8px 0 12px; }
    .metaRow .pill{ font-size:12px; }

    .choices{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
      margin-top:10px;
    }
    @media(min-width:720px){
      .choices{ grid-template-columns: 1fr 1fr; }
    }

    .choice{
      display:flex; gap:10px; align-items:flex-start;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
      padding:10px 12px;
      border-radius: 14px;
    }
    .choice input{ margin-top:3px; transform: scale(1.15); }
    .choice .lbl{ font-weight:800; width: 22px; flex: 0 0 auto; color: var(--accent2); }
    .choice .tx{ font-size:13px; color: var(--text); line-height:1.25; }
    .choice.small{ opacity: .65; }

    .hr{ height:1px; background: rgba(255,255,255,.10); margin: 14px 0; }

    .resultBox{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      padding:12px 12px;
      border-radius: 14px;
    }
    .resultGrid{
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    @media(min-width:720px){ .resultGrid{ grid-template-columns: 1fr 1fr; } }

    .stat{
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      padding:10px 12px;
      border-radius: 14px;
    }
    .stat .k{ font-size:12px; color: var(--muted); }
    .stat .v{ font-size:18px; font-weight:900; margin-top:4px; }

    .hint{
      font-size:12px; color: var(--muted); line-height:1.35;
    }
    .badge{
      display:inline-block;
      padding:4px 8px;
      border-radius: 999px;
      font-size:11px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: var(--text);
    }
    .badge.good{ border-color: rgba(34,197,94,.35); background: rgba(34,197,94,.12); }
    .badge.bad{ border-color: rgba(239,68,68,.35); background: rgba(239,68,68,.12); }
    .badge.warn{ border-color: rgba(245,158,11,.35); background: rgba(245,158,11,.12); }

    .footer{
      text-align:center; margin-top:14px; color: rgba(255,255,255,.65); font-size:12px;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      font-size: 11px;
      background: rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.12);
      border-radius: 10px;
      padding: 2px 6px;
      color: rgba(255,255,255,.85);
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo"><span>U</span></div>
        <div style="min-width:0">
          <h1>UPJŠ BioChem Testy</h1>
          <p>Predmet → Téma → Test · bodovanie podľa správnych možností</p>
        </div>
      </div>

      <div class="pill toggle" title="Prepína medzi 8 možnosťami (A–H) a 4 možnosťami (A–D)">
        <span id="modeLabel">Režim: 8 možností</span>
        <div id="modeSwitch" class="switch on" role="switch" aria-checked="true" tabindex="0">
          <div class="knob"></div>
        </div>
      </div>
    </div>

    <div class="grid">
      <!-- LEFT: NAV -->
      <div class="card" id="navCard">
        <div class="hd">
          <h2 id="navTitle">Menu</h2>
          <span class="badge" id="navBadge">Pripravené</span>
        </div>
        <div class="bd">
          <div class="crumbs" id="crumbs">Si tu: <b>Predmet</b></div>
          <div class="hr"></div>

          <div id="screenSubject" class="list"></div>
          <div id="screenThemes" class="list" style="display:none"></div>

          <div class="hr"></div>
          <div class="btnRow">
            <button class="btn ghost" id="backBtn" onclick="goBack()" style="display:none">⬅ Späť</button>
            <button class="btn danger" id="resetBtn" onclick="hardReset()">Reset</button>
          </div>
          <div style="margin-top:10px" class="hint">
            Tip: ak chceš „appku na ploche“ na iPhone, otvor v Safari → <b>Zdieľať</b> → <b>Pridať na plochu</b>.
          </div>
        </div>
      </div>

      <!-- RIGHT: QUIZ -->
      <div class="card" id="quizCard">
        <div class="hd">
          <h2 id="quizTitle">Vyber predmet a tému</h2>
          <span class="badge" id="quizBadge">—</span>
        </div>
        <div class="bd">
          <div class="progress" aria-label="Progress">
            <div class="bar" id="progressBar"></div>
          </div>

          <div class="metaRow">
            <span class="pill">Otázka: <b id="qIndex">—</b></span>
            <span class="pill">Body: <b id="scoreNow">0</b></span>
            <span class="pill">Možností: <b id="lettersNow">A–H</b></span>
          </div>

          <h3 class="qTitle" id="qText">Tu sa zobrazí otázka.</h3>
          <div id="choices" class="choices"></div>

          <div class="hr"></div>
          <div class="btnRow">
            <button class="btn primary" id="checkBtn" onclick="checkAndNext()" disabled>Skontrolovať & ďalej</button>
            <button class="btn" id="skipBtn" onclick="skipQuestion()" disabled>Preskočiť</button>
            <button class="btn good" id="finishBtn" onclick="finishQuiz()" disabled>Vyhodnotiť</button>
          </div>

          <div id="resultWrap" style="display:none; margin-top:14px;">
            <div class="resultBox">
              <div class="resultGrid">
                <div class="stat">
                  <div class="k">Získané body</div>
                  <div class="v" id="finalScore">0</div>
                </div>
                <div class="stat">
                  <div class="k">Úspešnosť</div>
                  <div class="v" id="finalPct">0%</div>
                </div>
                <div class="stat">
                  <div class="k">Otázok spolu</div>
                  <div class="v" id="finalCount">0</div>
                </div>
                <div class="stat">
                  <div class="k">Režim</div>
                  <div class="v" id="finalMode">8 možností</div>
                </div>
              </div>
              <div class="hr"></div>
              <div id="finalBadgeRow"></div>
              <div class="hr"></div>
              <div class="btnRow">
                <button class="btn primary" onclick="restartSameTheme()">Znova túto tému</button>
                <button class="btn" onclick="goBackToThemes()">Vybrať inú tému</button>
              </div>
              <div class="hint" style="margin-top:10px">
                Bodovanie: za každú otázku dostaneš <b>bod za každú správne označenú možnosť</b>.
                Ak otázka má napr. 4 správne možnosti a označíš 3 z nich, získaš <b>3 body</b>.
                (T. j. „čiastočné body“ ako na prijímačkách.)
              </div>
            </div>
          </div>

          <div class="footer">
            Ovládanie: <span class="kbd">Tap</span> na možnosti · <span class="kbd">Skontrolovať & ďalej</span> pokračuje · <span class="kbd">Vyhodnotiť</span> ukončí.
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/**
 * ============================
 * 1) SEM VLOŽÍŠ OTÁZKY (JEDINÉ MIESTO)
 * ============================
 *
 * Formát jednej otázky:
 * {
 *   id: 116,                         // číslo otázky (voliteľné, ale odporúčam)
 *   text: "116. ...",
 *   choices: { A:"...", B:"...", ... H:"..." },  // 8 možností (A–H)
 *   correct: ["C","D","E"]           // správne písmená
 * }
 *
 * Ak chceš otázku len s 4 možnosťami, môžeš aj tak dať A–H a prepínač režimu urobí výber.
 */
const QUESTION_BANK = {
  bio: {
    name: "Biológia",
    themes: [
      { key:"bio_struktura_1_115", name:"Štruktúra a delenie bunky (1–115)", questions: [{
  id: 1,
  text: "1. Prokaryotická bunka:",
  choices: {
    A: "môže obsahovať tylakoidy",
    B: "môže obsahovať chloroplasty",
    C: "obsahuje prokaryotické ribozómy",
    D: "má cytoplazmatickú membránu",
    E: "má nukleoid",
    F: "má lineárne molekuly DNA",
    G: "má vnútorné membrány",
    H: "má kruhové chromozómy"
  },
  correct: ["A","C","D","E"]
},

{
  id: 2,
  text: "2. Prokaryotické bunky nemajú:",
  choices: {
    A: "plastidy",
    B: "vnútorný membránový systém",
    C: "ribozómy",
    D: "diktyozómy",
    E: "cytoplazmatickú membránu",
    F: "centriol",
    G: "jadierko",
    H: "mitochondrie"
  },
  correct: ["A","B","D","F","G","H"]
},

{
  id: 3,
  text: "3. Ktoré štruktúry zabezpečujú uvoľňovanie energie:",
  choices: {
    A: "tylakoidy",
    B: "bičíky",
    C: "ribozómy",
    D: "mitochondrie",
    E: "plazmatická membrána",
    F: "jadro",
    G: "diktyozómy",
    H: "vakuoly"
  },
  correct: ["E"]
},

{
  id: 4,
  text: "4. Cytológia sa zaoberá štúdiom:",
  choices: {
    A: "živých sústav na molekulovej úrovni",
    B: "mikroskopickej stavby tkanív",
    C: "javov na úrovni bunky",
    D: "živých mikroorganizmov",
    E: "základnej stavebnej jednotky života",
    F: "vírusov",
    G: "tvaru a štruktúry buniek a organel",
    H: "makromolekúl"
  },
  correct: ["C","E","G"]
},

{
  id: 5,
  text: "5. Najmenší systém schopný samostatného života je:",
  choices: {
    A: "vírus",
    B: "bunka",
    C: "kolónia",
    D: "biopolymér",
    E: "mnohobunkový organizmus",
    F: "populácia",
    G: "nukleoproteínová častica",
    H: "indivíduum vyššieho rádu"
  },
  correct: ["B"]
},

{
  id: 6,
  text: "6. Vírusy sú:",
  choices: {
    A: "extracelulárne parazity",
    B: "schopné uchovávať genetickú informáciu",
    C: "nebunkové organizmy",
    D: "najjednoduchšie prokaryotické organizmy",
    E: "najjednoduchšie živé sústavy",
    F: "schopné autoreprodukcie",
    G: "existujú len ako parazity buniek",
    H: "rozmnožujú sa len v živých bunkách"
  },
  correct: ["B","C","G","H"]
},

{
  id: 7,
  text: "7. Podľa stavby rozlišujeme bunky:",
  choices: {
    A: "rastlinné a živočíšne",
    B: "jadrové a bezjadrové",
    C: "diferencované a nediferencované",
    D: "prokaryotické a eukaryotické",
    E: "mikroskopické a submikroskopické",
    F: "jednoduché a zložené",
    G: "membránové a nemembránové",
    H: "telové a pohlavné"
  },
  correct: ["D"]
},

{
  id: 8,
  text: "8. Pravé individuá vyššieho rádu:",
  choices: {
    A: "sú spoločenstvá sociálneho hmyzu",
    B: "sú svorky vlkov",
    C: "sú samostatne existujúce jedince",
    D: "sú obligátne spoločenstvá organizmov",
    E: "majú trvalo diferencovaných jedincov",
    F: "majú zameniteľné funkcie",
    G: "majú nezameniteľnú funkciu jedincov",
    H: "sú dočasné spoločenstvá"
  },
  correct: ["D","G"]
},

{
  id: 9,
  text: "9. Bunky rovnakého typu sa spájajú do:",
  choices: {
    A: "orgánov",
    B: "špecializovaných buniek",
    C: "pletív",
    D: "organizmov",
    E: "indivíduí vyššieho rádu",
    F: "tkanív",
    G: "tkanivových kultúr",
    H: "organel"
  },
  correct: ["C","F"]
},

{
  id: 10,
  text: "10. Základom cytoplazmatickej membrány je:",
  choices: {
    A: "bielkovinová dvojvrstva",
    B: "celulózová dvojvrstva",
    C: "dvojvrstva lipidov s bielkovinami",
    D: "cytosol",
    E: "cytoplazmatická matrix",
    F: "fosfolipidová dvojvrstva",
    G: "plazmaléma",
    H: "bielkovinová vrstva s fosfolipidmi"
  },
  correct: ["C","F"]
  {
  id: 11,
  text: "11. K základným bunkovým povrchom eukaryotickej bunky patrí:",
  choices: {
    A: "plazmaléma",
    B: "jadrová membrána",
    C: "kutikula",
    D: "pelikula",
    E: "bunková stena",
    F: "cytoplazmatická membrána",
    G: "slizové puzdro",
    H: "karyoléma"
  },
  correct: ["A","B","E","F","H"]
},

{
  id: 12,
  text: "12. Cytoplazmatická membrána:",
  choices: {
    A: "je jedinou biomembránou prokaryotov",
    B: "reguluje príjem látok",
    C: "nazýva sa plazmaléma",
    D: "nazýva sa karyoléma",
    E: "patrí medzi bunkové povrchy",
    F: "obsahuje receptory",
    G: "tvorí prostredie pre organely",
    H: "má len mechanickú funkciu"
  },
  correct: ["A","B","C","E","F"]
},

{
  id: 13,
  text: "13. Biomembrány sú zložené:",
  choices: {
    A: "z dvojvrstvy bielkovín a sacharidov",
    B: "z dvojvrstvy lipidov a bielkovín",
    C: "z dvojvrstvy fosfolipidov a sacharidov",
    D: "z jednej vrstvy fosfolipidov",
    E: "z fosfolipidov a bielkovín",
    F: "z bielkovín",
    G: "z lipidov a bielkovín",
    H: "z dvojvrstvy fosfolipidov s bielkovinami"
  },
  correct: ["B","E","H"]
},

{
  id: 14,
  text: "14. Eukaryotické bunky:",
  choices: {
    A: "majú membránové organely",
    B: "nemajú membránové organely",
    C: "majú karyolému",
    D: "nemajú jadrovú membránu",
    E: "majú kruhové chromozómy",
    F: "sú menšie ako prokaryoty",
    G: "majú vnútorné membrány",
    H: "nemajú DNA"
  },
  correct: ["A","C","G"]
},

{
  id: 15,
  text: "15. Živočíšne bunky:",
  choices: {
    A: "majú bunkovú stenu",
    B: "obsahujú lyzozómy",
    C: "majú veľkú vakuolu",
    D: "sú spojené plazmodezmami",
    E: "majú tonoplast",
    F: "nemajú bunkovú stenu",
    G: "môžu obsahovať myofibrily",
    H: "obsahujú plastidy"
  },
  correct: ["B","F","G"]
},

{
  id: 16,
  text: "16. Cytoskelet bunky:",
  choices: {
    A: "udržiava tvar bunky",
    B: "je statická štruktúra",
    C: "zabezpečuje pohyb",
    D: "zúčastňuje sa fagocytózy",
    E: "zúčastňuje sa pinocytózy",
    F: "nemá funkciu",
    G: "je z nukleoproteínov",
    H: "má mechanickú funkciu"
  },
  correct: ["A","C","D","E","H"]
},

{
  id: 17,
  text: "17. Cytoskelet:",
  choices: {
    A: "patrí medzi membránové organely",
    B: "je dynamický",
    C: "zabezpečuje pohyb bunky",
    D: "je nemenný",
    E: "tvorí ho mikrotubuly",
    F: "tvorí ho RNA",
    G: "tvorí ho mikrofilamenty",
    H: "nemá funkciu"
  },
  correct: ["B","C","E","G"]
},

{
  id: 18,
  text: "18. Drsné endoplazmatické retikulum:",
  choices: {
    A: "syntetizuje lipidy",
    B: "má ribozómy",
    C: "syntetizuje bielkoviny",
    D: "je bez ribozómov",
    E: "zabezpečuje transport",
    F: "nepatrí medzi membránové organely",
    G: "syntetizuje DNA",
    H: "je súčasť cytoskeletu"
  },
  correct: ["B","C","E"]
},

{
  id: 19,
  text: "19. Hladké endoplazmatické retikulum:",
  choices: {
    A: "nemá ribozómy",
    B: "syntetizuje lipidy",
    C: "syntetizuje vitamín D",
    D: "má ribozómy",
    E: "syntetizuje bielkoviny",
    F: "má hydrolytické enzýmy",
    G: "zabezpečuje transport",
    H: "je súčasťou jadra"
  },
  correct: ["A","B","C","G"]
},

{
  id: 20,
  text: "20. Lyzozómy obsahujú:",
  choices: {
    A: "enzýmy rozkladu",
    B: "enzýmy trávenia",
    C: "DNA",
    D: "hydrolytické enzýmy",
    E: "ribozómy",
    F: "mitochondrie",
    G: "enzýmy rozkladu cudzích látok",
    H: "chlorofyl"
  },
  correct: ["A","B","D","G"]
{
  id: 21,
  text: "21. Mitochondrie sú:",
  choices: {
    A: "len v prokaryotických bunkách",
    B: "oddelené dvojitou membránou",
    C: "energetickým centrom bunky",
    D: "súčasťou jadra",
    E: "metabolickým centrom bunky",
    F: "bez vlastnej DNA",
    G: "početné v energeticky náročných bunkách",
    H: "typické len pre rastliny"
  },
  correct: ["B","C","E","G"]
},

{
  id: 22,
  text: "22. Bunkové jadro:",
  choices: {
    A: "nazýva sa karyon",
    B: "obsahuje RNA a bielkoviny",
    C: "obsahuje DNA",
    D: "nemá jadrovú membránu",
    E: "má karyolému",
    F: "má dvojitú membránu",
    G: "je len v prokaryotoch",
    H: "je riadiace centrum bunky"
  },
  correct: ["A","C","E","F","H"]
},

{
  id: 23,
  text: "23. Ribozómy:",
  choices: {
    A: "sú membránové organely",
    B: "sú submikroskopické",
    C: "tvoria sa v jadierku",
    D: "sú zložené z DNA",
    E: "sú zložené z RNA a bielkovín",
    F: "sú viditeľné svetelným mikroskopom",
    G: "sú viazané na hladké ER",
    H: "podieľajú sa na syntéze bielkovín"
  },
  correct: ["B","C","E","H"]
},

{
  id: 24,
  text: "24. Mitochondrie:",
  choices: {
    A: "majú jednu membránu",
    B: "majú dve membrány",
    C: "obsahujú vlastnú DNA",
    D: "syntetizujú ATP",
    E: "sú súčasťou cytoskeletu",
    F: "obsahujú enzýmy Krebsovho cyklu",
    G: "obsahujú chlorofyl",
    H: "sú prítomné v prokaryotoch"
  },
  correct: ["B","C","D","F"]
},

{
  id: 25,
  text: "25. Počet membrán mitochondrie:",
  choices: {
    A: "žiadna",
    B: "jedna",
    C: "dve",
    D: "tri",
    E: "vonkajšia a vnútorná",
    F: "len fosfolipidová",
    G: "podľa typu bunky",
    H: "len vnútorná"
  },
  correct: ["C","E"]
},

{
  id: 26,
  text: "26. Golgiho aparát:",
  choices: {
    A: "syntetizuje DNA",
    B: "upravuje a triedi bielkoviny",
    C: "tvorí lyzozómy",
    D: "je súčasťou jadra",
    E: "tvorí sekrečné vezikuly",
    F: "zabezpečuje oxidácie",
    G: "tvorí polysacharidy",
    H: "nemá membrány"
  },
  correct: ["B","C","E","G"]
},

{
  id: 27,
  text: "27. Diktyozómy sú:",
  choices: {
    A: "súčasť mitochondrií",
    B: "súčasť Golgiho aparátu",
    C: "v prokaryotických bunkách",
    D: "membránové štruktúry",
    E: "v jadre",
    F: "v eukaryotických bunkách",
    G: "súčasť cytoskeletu",
    H: "bez membrány"
  },
  correct: ["B","D","F"]
},

{
  id: 28,
  text: "28. Jadierko:",
  choices: {
    A: "je v cytoplazme",
    B: "je v jadre",
    C: "vzniká počas interfázy",
    D: "syntetizuje rRNA",
    E: "zaniká počas mitózy",
    F: "je v prokaryotoch",
    G: "má vlastnú membránu",
    H: "má funkciu pri tvorbe ribozómov"
  },
  correct: ["B","D","E","H"]
},

{
  id: 29,
  text: "29. Jadro bunky:",
  choices: {
    A: "obsahuje chromatín",
    B: "riadi bunku",
    C: "obsahuje centrioly",
    D: "je reprodukčné centrum",
    E: "je naplnené bunkovou šťavou",
    F: "má jadrové póry",
    G: "je pohybové centrum",
    H: "nie je dôležité"
  },
  correct: ["A","B","D","F"]
},

{
  id: 30,
  text: "30. Medzi membránové organely patria:",
  choices: {
    A: "ribozómy",
    B: "lyzozómy",
    C: "mitochondrie",
    D: "jadierko",
    E: "Golgiho aparát",
    F: "cytoskelet",
    G: "vakuoly",
    H: "chromozómy"
  },
  correct: ["B","C","E","G"]
{
  id: 31,
  text: "31. Medzi nemembránové organely nepatria:",
  choices: {
    A: "ribozómy",
    B: "centrioly",
    C: "mitochondrie",
    D: "cytoskelet",
    E: "jadierko",
    F: "mikrotubuly",
    G: "mikrofilamenty",
    H: "chromozómy"
  },
  correct: ["C"]
},

{
  id: 32,
  text: "32. Medzi membránové organely patria:",
  choices: {
    A: "centrioly",
    B: "ribozómy",
    C: "jadierko",
    D: "mitochondrie",
    E: "Golgiho aparát",
    F: "cytoskelet",
    G: "lyzozómy",
    H: "vakuoly"
  },
  correct: ["D","E","G","H"]
},

{
  id: 33,
  text: "33. K mitotickému aparátu patria:",
  choices: {
    A: "centroméra",
    B: "chromozómy",
    C: "astrosféra",
    D: "centrioly",
    E: "jadierko",
    F: "deliace vretienko",
    G: "cytoplazma",
    H: "ribozómy"
  },
  correct: ["A","C","D","F"]
},

{
  id: 34,
  text: "34. Chromozómy:",
  choices: {
    A: "sú viditeľné len počas delenia",
    B: "sú stále viditeľné",
    C: "obsahujú DNA a bielkoviny",
    D: "majú centroméru",
    E: "sú tvorené RNA",
    F: "majú ramená",
    G: "sú jednochromatídové v metafáze",
    H: "sú dvojchromatídové v metafáze"
  },
  correct: ["A","C","D","F","H"]
},

{
  id: 35,
  text: "35. Obsah vody v bunke:",
  choices: {
    A: "je približne 65 %",
    B: "je nemenný",
    C: "závisí od typu bunky",
    D: "závisí od veku bunky",
    E: "je vyšší u mladých buniek",
    F: "je vyšší u starých buniek",
    G: "je vždy rovnaký",
    H: "netvorí podstatnú časť bunky"
  },
  correct: ["A","C","D","E"]
},

{
  id: 36,
  text: "36. Endocytóza:",
  choices: {
    A: "je pasívny transport",
    B: "je aktívny transport",
    C: "zahŕňa pinocytózu",
    D: "zahŕňa fagocytózu",
    E: "prebieha bez energie",
    F: "je príjem látok do bunky",
    G: "je výdaj látok",
    H: "vyžaduje ATP"
  },
  correct: ["B","C","D","F","H"]
},

{
  id: 37,
  text: "37. Rastlinná bunka v hypertonickom prostredí:",
  choices: {
    A: "nasáva vodu",
    B: "stráca vodu",
    C: "zväčšuje objem",
    D: "podlieha plazmolýze",
    E: "podlieha plazmoptýze",
    F: "zmenšuje objem",
    G: "oddeľuje sa membrána od steny",
    H: "praská"
  },
  correct: ["B","D","F","G"]
},

{
  id: 38,
  text: "38. Živočíšna bunka v hypotonickom prostredí:",
  choices: {
    A: "stráca vodu",
    B: "praská",
    C: "nasáva vodu",
    D: "podlieha plazmoptýze",
    E: "zmenšuje objem",
    F: "zväčšuje objem",
    G: "nemení objem",
    H: "dochádza k lýze"
  },
  correct: ["B","C","D","F","H"]
},

{
  id: 39,
  text: "39. Živočíšna bunka v hypertonickom prostredí:",
  choices: {
    A: "stráca vodu",
    B: "praská",
    C: "nasáva vodu",
    D: "zmenšuje objem",
    E: "podlieha plazmolýze",
    F: "podlieha plazmoptýze",
    G: "zostáva nezmenená",
    H: "zväčšuje objem"
  },
  correct: ["A","D"]
},

{
  id: 40,
  text: "40. Difúzia a osmóza:",
  choices: {
    A: "sú aktívne procesy",
    B: "vyžadujú energiu",
    C: "sú pasívne procesy",
    D: "prebiehajú proti gradientu",
    E: "prebiehajú po gradiente",
    F: "nemenia štruktúru membrány",
    G: "vyžadujú transportné bielkoviny",
    H: "nevyžia energiu"
  },
  correct: ["C","E","F","H"]
{
  id: 41,
  text: "41. Bunkovou bariérou, ktorá selektívne prepúšťa látky do bunky je:",
  choices: {
    A: "jadrová membrána",
    B: "plazmaléma",
    C: "bunková stena",
    D: "cytoplazmatická membrána",
    E: "slizové puzdro",
    F: "plazmatická membrána",
    G: "fibrilárna štruktúra",
    H: "cytoskelet"
  },
  correct: ["B","D","F"]
},

{
  id: 42,
  text: "42. Pasívny transport látok:",
  choices: {
    A: "nevyžaduje energiu",
    B: "prebieha proti gradientu",
    C: "je difúzia",
    D: "je osmóza",
    E: "prebieha v smere gradientu",
    F: "nezávisí od koncentrácie",
    G: "týka sa plynov",
    H: "vyžaduje ATP"
  },
  correct: ["A","C","D","E","G"]
},

{
  id: 43,
  text: "43. Hypotonické prostredie:",
  choices: {
    A: "má nižšiu koncentráciu látok",
    B: "má vyššiu koncentráciu látok",
    C: "spôsobuje plazmolýzu",
    D: "spôsobuje plazmoptýzu",
    E: "spôsobuje lýzu erytrocytov",
    F: "oddeľuje membránu od bunkovej steny",
    G: "je destilovaná voda",
    H: "spôsobuje nasávanie vody"
  },
  correct: ["A","D","E","G","H"]
},

{
  id: 44,
  text: "44. Transportné bielkoviny:",
  choices: {
    A: "prenášajú látky vo vezikulách",
    B: "sú univerzálne",
    C: "viažu špecifické látky",
    D: "umožňujú prechod látok membránou",
    E: "zúčastňujú sa endocytózy",
    F: "umožňujú difúziu",
    G: "sú špecifické",
    H: "podieľajú sa na sprostredkovanej difúzii"
  },
  correct: ["C","D","G","H"]
},

{
  id: 45,
  text: "45. Nesprávne tvrdenia:",
  choices: {
    A: "cytoskelet zabezpečuje pohyb len u prvokov",
    B: "mikrotubuly obsahujú tubulín",
    C: "vakuoly majú metabolickú funkciu",
    D: "mikrofilamenty obsahujú pektín",
    E: "deliace vretienko je z mikrotubulov",
    F: "plastidy sú typ chloroplastov",
    G: "mikrofilamenty skracujú bunku",
    H: "tylakoidy sú v chloroplaste"
  },
  correct: ["A","D","F"]
},

{
  id: 46,
  text: "46. Difúziou môžu prechádzať:",
  choices: {
    A: "všetky látky",
    B: "len veľké molekuly",
    C: "plyny",
    D: "etanol",
    E: "ióny",
    F: "látky podľa priepustnosti membrány",
    G: "voda",
    H: "látky proti gradientu"
  },
  correct: ["C","D","F","G"]
},

{
  id: 47,
  text: "47. Rýchlosť difúzie závisí od:",
  choices: {
    A: "prestavy membrány",
    B: "ATP",
    C: "transportných bielkovín",
    D: "teploty",
    E: "koncentračného spádu",
    F: "cytoskeletu",
    G: "enzýmov",
    H: "diferenciácie bunky"
  },
  correct: ["D","E"]
},

{
  id: 48,
  text: "48. Pseudopódie vznikajú:",
  choices: {
    A: "pri pinocytóze",
    B: "pomocou cytoskeletu",
    C: "pri fagocytóze",
    D: "pri osmóze",
    E: "pomocou mikrofilamentov",
    F: "pri uzatváraní častíc",
    G: "pri exocytóze",
    H: "pri pasívnom transporte"
  },
  correct: ["B","C","E","F"]
},

{
  id: 49,
  text: "49. Aktívny transport:",
  choices: {
    A: "prenáša vodu",
    B: "prenáša plyny",
    C: "prenáša etanol",
    D: "prenáša Ca²⁺",
    E: "využíva bielkoviny",
    F: "prenáša Na⁺ von",
    G: "prenáša K⁺ dnu",
    H: "prebieha proti gradientu"
  },
  correct: ["D","E","F","G","H"]
},

{
  id: 50,
  text: "50. Bunkový cyklus:",
  choices: {
    A: "je regeneračná doba bunky",
    B: "je geneticky riadený",
    C: "zastavuje sa v S fáze",
    D: "je kontrolovaný v G1 fáze",
    E: "môže byť narušený vírusmi",
    F: "obsahuje G1, S, G2",
    G: "majú ho aj prokaryoty",
    H: "má fázy G1, S, G2, M"
  },
  correct: ["B","D","E","F","H"]
{
  id: 51,
  text: "51. Poradie fáz bunkového cyklu je:",
  choices: {
    A: "karyokinéza → cytokinéza",
    B: "profáza → metafáza → anafáza → telofáza",
    C: "heterotypické → homeotypické delenie",
    D: "G1 → S → G2 → M",
    E: "predmitotická → S → postmitotická → M",
    F: "amitóza → mitóza → meióza",
    G: "interfáza → M fáza",
    H: "postmitotická → S → predmitotická → M"
  },
  correct: ["D","G"]
},

{
  id: 52,
  text: "52. Generačná doba bunky:",
  choices: {
    A: "je geneticky daná",
    B: "je rovnaká pre všetky bunky",
    C: "je čas trvania bunkového cyklu",
    D: "líši sa podľa typu bunky",
    E: "nezávisí od živín",
    F: "je len interfáza",
    G: "je regenerácia bunky",
    H: "závisí od množstva živín"
  },
  correct: ["A","C","D","H"]
},

{
  id: 53,
  text: "53. Bunkový cyklus sa skúma:",
  choices: {
    A: "in vivo",
    B: "na vírusoch",
    C: "na baktériách in vivo",
    D: "in vitro",
    E: "na nádorových bunkách",
    F: "na bunkových kultúrach",
    G: "na pletivách",
    H: "na diferencovaných bunkách"
  },
  correct: ["D","E","F"]
},

{
  id: 54,
  text: "54. Interfáza:",
  choices: {
    A: "je obdobie bez delenia",
    B: "zahŕňa mitózu",
    C: "je celý bunkový cyklus",
    D: "je generačná doba",
    E: "zahŕňa profázu až telofázu",
    F: "zahŕňa G1, S, G2",
    G: "obsahuje hlavný kontrolný bod",
    H: "je rastová fáza"
  },
  correct: ["A","F","G","H"]
},

{
  id: 55,
  text: "55. Pri nedostatku živín:",
  choices: {
    A: "sa generačná doba nemení",
    B: "sa zrýchľuje",
    C: "sa predlžuje",
    D: "vznikajú nádory",
    E: "zastaví sa G1 fáza",
    F: "zastaví sa celý cyklus",
    G: "bunka prejde do M fázy",
    H: "delenie sa zrýchli"
  },
  correct: ["C","F"]
},

{
  id: 56,
  text: "56. G1 fáza:",
  choices: {
    A: "je predmitotická",
    B: "je postmitotická",
    C: "začína po delení bunky",
    D: "začína zánikom bunky",
    E: "je začiatkom cyklu",
    F: "prebieha rast bunky",
    G: "je najkratšia",
    H: "je najvariabilnejšia"
  },
  correct: ["B","C","E","F","H"]
},

{
  id: 57,
  text: "57. V G1 fáze:",
  choices: {
    A: "prebieha syntéza bielkovín",
    B: "je hlavný kontrolný bod",
    C: "prebieha replikácia DNA",
    D: "bunka sa pripravuje na delenie",
    E: "kontroluje sa karyokinéza",
    F: "kontroluje sa cytokinéza",
    G: "prebieha rast bunky",
    H: "DNA sa ešte nezdvojuje"
  },
  correct: ["A","B","D","G","H"]
},

{
  id: 58,
  text: "58. Sesterské chromatídy:",
  choices: {
    A: "vznikajú replikáciou DNA",
    B: "sú homologické",
    C: "sú spojené centromérou",
    D: "rozchádzajú sa v mitóze",
    E: "rozchádzajú sa v meióze I",
    F: "rozchádzajú sa v meióze II",
    G: "sú geneticky identické",
    H: "vznikajú v G1 fáze"
  },
  correct: ["A","C","D","F","G"]
},

{
  id: 59,
  text: "59. Nesprávne tvrdenie:",
  choices: {
    A: "v profáze sa chromozómy skracujú",
    B: "v metafáze sú v ekvatoriálnej rovine",
    C: "v S fáze prebieha syntéza DNA",
    D: "v profáze sa centrozómy delia v jadre",
    E: "v telofáze zaniká deliace vretienko",
    F: "v anafáze sa rozchádzajú chromatídy",
    G: "G1 fáza je kontrolný bod",
    H: "crossing-over prebieha v profáze I"
  },
  correct: ["D"]
},

{
  id: 60,
  text: "60. Bielkoviny vznikajúce v G1 fáze slúžia:",
  choices: {
    A: "na tvorbu mitotického aparátu",
    B: "na rast bunky",
    C: "na tvorbu chromozómov",
    D: "na metabolické procesy",
    E: "na tvorbu organel",
    F: "na zásobné látky",
    G: "na tvorbu vretienka",
    H: "na tvorbu plazmatickej platničky"
  },
  correct: ["B","D","E"]
{
  id: 61,
  text: "61. Kľúčovým procesom S-fázy je:",
  choices: {
    A: "syntéza DNA",
    B: "zdvojenie jednochromatídových chromozómov",
    C: "rozdelenie chromozómov",
    D: "regenerácia jadra",
    E: "zdvojenie organel",
    F: "zdvojenie dvojchromatídových chromozómov",
    G: "znásobenie genetického materiálu",
    H: "zdvojenie homologických chromozómov"
  },
  correct: ["A","B","G"]
},

{
  id: 62,
  text: "62. Karyokinéza a cytokinéza prebiehajú:",
  choices: {
    A: "v interfáze",
    B: "v M-fáze",
    C: "v telofáze mitózy",
    D: "v G2 fáze",
    E: "v telofáze II",
    F: "v metafáze",
    G: "v postmitotickej fáze",
    H: "v telofáze I"
  },
  correct: ["B"]
},

{
  id: 63,
  text: "63. Do interfázy bunkového cyklu patrí:",
  choices: {
    A: "G1 fáza",
    B: "G0 fáza",
    C: "M fáza",
    D: "meióza",
    E: "mitóza",
    F: "G1 fáza",
    G: "S fáza",
    H: "G2 fáza"
  },
  correct: ["A","F","G","H"]
},

{
  id: 64,
  text: "64. Chemické regulačné mechanizmy bunkového cyklu:",
  choices: {
    A: "môžu stimulovať delenie",
    B: "môžu inhibovať delenie",
    C: "patria sem cytostatiká",
    D: "účinkujú najmä v G1 fáze",
    E: "účinkujú najmä v M fáze",
    F: "môžu byť vírusy",
    G: "ovplyvňujú diferenciáciu buniek",
    H: "pôsobia len na zrelé bunky"
  },
  correct: ["A","B","C","D","F","G"]
},

{
  id: 65,
  text: "65. Reguláciu bunkového cyklu ovplyvňujú:",
  choices: {
    A: "cytostatiká",
    B: "látky stimulujúce delenie",
    C: "teplota",
    D: "niektoré vírusy",
    E: "kolchicín",
    F: "rastové regulátory",
    G: "dostatok živín",
    H: "rastové hormóny"
  },
  correct: ["A","C","D","E","F","G","H"]
},

{
  id: 66,
  text: "66. Stimulačný účinok na bunkový cyklus majú:",
  choices: {
    A: "cytostatiká",
    B: "kolchicín",
    C: "inhibítory rastu",
    D: "kontrolný bod G1",
    E: "niektoré vírusy",
    F: "rastové hormóny",
    G: "rastové regulátory",
    H: "antibiotiká"
  },
  correct: ["E","F","G"]
},

{
  id: 67,
  text: "67. V profáze mitózy:",
  choices: {
    A: "sa delí centriol",
    B: "chromozómy sú dvojchromatídové",
    C: "chromozómy sú jednochromatídové",
    D: "chromozómy sa skracujú",
    E: "chromozómy sa špiralizujú",
    F: "zaniká jadrová membrána",
    G: "chromozómy sa dešpiralizujú",
    H: "centrozómy putujú k pólom"
  },
  correct: ["A","B","D","E","F","H"]
},

{
  id: 68,
  text: "68. V metafáze mitózy:",
  choices: {
    A: "chromozómy sú dvojchromatídové",
    B: "chromozómy sú jednochromatídové",
    C: "prebieha replikácia DNA",
    D: "chromozómy sú v ekvatoriálnej rovine",
    E: "chromozómy sa dešpiralizujú",
    F: "chromatídy sa rozchádzajú",
    G: "vrcholí špiralizácia",
    H: "mikrotubuly sa viažu na centroméry"
  },
  correct: ["A","D","G","H"]
},

{
  id: 69,
  text: "69. V telofáze mitózy:",
  choices: {
    A: "chromozómy sa špiralizujú",
    B: "chromozómy sa dešpiralizujú",
    C: "sú dvojchromatídové",
    D: "sú jednochromatídové",
    E: "zaniká deliace vretienko",
    F: "zaniká jadrová membrána",
    G: "zaniká jadierko",
    H: "obnovuje sa jadro"
  },
  correct: ["B","D","E","H"]
},

{
  id: 70,
  text: "70. Cytokinéza:",
  choices: {
    A: "je veda o bunkách",
    B: "je rozdelenie jadra",
    C: "je pozdĺžne rozdelenie bunky",
    D: "vedie k viacjadrovým bunkám",
    E: "je súčasť interfázy",
    F: "je rastová fáza",
    G: "je pohyb bunky",
    H: "je rozdelenie bunky na dve dcérske"
  },
  correct: ["H"]
{
  id: 71,
  text: "71. Telové bunky živočíchov:",
  choices: {
    A: "sú haploidné",
    B: "sú diploidné",
    C: "majú 2n chromozómov",
    D: "sú geneticky homologické",
    E: "sú geneticky identické",
    F: "sú geneticky odlišné",
    G: "vznikajú meiózou",
    H: "sú pohlavné bunky"
  },
  correct: ["B","C","E"]
},

{
  id: 72,
  text: "72. Bivalenty vznikajú:",
  choices: {
    A: "v profáze homeotypického delenia",
    B: "v anafáze heterotypického delenia",
    C: "v profáze heterotypického delenia",
    D: "párovaním homologických chromozómov",
    E: "párovaním identických chromozómov",
    F: "párovaním heterologických chromozómov",
    G: "v profáze I a zanikajú v anafáze I",
    H: "v mitóze"
  },
  correct: ["C","D","G"]
},

{
  id: 73,
  text: "73. Správne tvrdenie:",
  choices: {
    A: "meiózou sa delia len diploidné bunky",
    B: "meiózou sa delia len haploidné bunky",
    C: "v anafáze I sa rozchádzajú chromatídy",
    D: "v anafáze I sa rozchádzajú dvojchromatídové chromozómy",
    E: "v metafáze I sú jednotlivé chromozómy",
    F: "v metafáze I sú bivalenty",
    G: "crossing-over prebieha v profáze II",
    H: "druhé meiotické delenie znižuje počet chromozómov"
  },
  correct: ["A","D","F"]
},

{
  id: 74,
  text: "74. Zygota:",
  choices: {
    A: "je oplodnené vajíčko",
    B: "vzniká redukčným delením",
    C: "je pohlavná bunka",
    D: "má schopnosť totipotencie",
    E: "je haploidná",
    F: "je diploidná",
    G: "obsahuje úplnú genetickú informáciu",
    H: "má genetickú informáciu len v cytoplazme"
  },
  correct: ["A","D","F","G"]
},

{
  id: 75,
  text: "75. Karyokinéza je:",
  choices: {
    A: "rozdelenie jadra",
    B: "rozdelenie bunky",
    C: "súčasť interfázy",
    D: "súčasť bunkového cyklu",
    E: "zdvojenie jadra",
    F: "veda o jadre",
    G: "rozmnožovanie buniek",
    H: "delenie centriol"
  },
  correct: ["A","D"]
},

{
  id: 76,
  text: "76. Bunkové delenie:",
  choices: {
    A: "sa nazýva karyokinéza",
    B: "môže byť mitóza",
    C: "prebieha v M fáze",
    D: "prebieha v interfáze",
    E: "zabezpečuje regeneráciu",
    F: "zabezpečuje náhradu buniek",
    G: "znamená rozmnožovanie buniek",
    H: "zahŕňa karyokinézu aj cytokinézu"
  },
  correct: ["B","C","E","F","G","H"]
},

{
  id: 77,
  text: "77. Počet chromozómov po mitóze:",
  choices: {
    A: "je rovnaký ako v materskej bunke",
    B: "je polovičný",
    C: "je haploidný",
    D: "dochádza k redukcii",
    E: "chromozómy sa delia pozdĺžne",
    F: "chromozómy sa delia priečne",
    G: "je ako pri meióze",
    H: "zostáva diploidný"
  },
  correct: ["A","E","H"]
},

{
  id: 78,
  text: "78. Bunky vzniknuté meiózou:",
  choices: {
    A: "sú geneticky rovnaké",
    B: "nie sú geneticky rovnaké",
    C: "sú haploidné",
    D: "sú diploidné",
    E: "sú pohlavné bunky",
    F: "sú geneticky identické s materskou",
    G: "zvyšujú variabilitu",
    H: "vznikajú mitózou"
  },
  correct: ["B","C","E","G"]
},

{
  id: 79,
  text: "79. Heterotypické delenie:",
  choices: {
    A: "je mitóza",
    B: "znižuje počet chromozómov",
    C: "je druhé meiotické delenie",
    D: "vedie k nerovnomernému rozdeleniu DNA",
    E: "končí vznikom 4 buniek",
    F: "je prvé meiotické delenie",
    G: "nemení počet chromozómov",
    H: "je súčasť mitózy"
  },
  correct: ["B","F"]
},

{
  id: 80,
  text: "80. Redukčné delenie:",
  choices: {
    A: "je mitóza",
    B: "je meióza",
    C: "tvorí pohlavné bunky",
    D: "tvorí diploidné bunky",
    E: "prebieha v dvoch deleniach",
    F: "prebieha len raz",
    G: "je typické pre pohlavné rozmnožovanie",
    H: "nemení počet chromozómov"
  },
  correct: ["B","C","E","G"]
{
  id: 81,
  text: "81. Homeotypické delenie:",
  choices: {
    A: "je prvé meiotické delenie",
    B: "je druhé meiotické delenie",
    C: "má profázu I",
    D: "má profázu II",
    E: "prebieha v ňom crossing-over",
    F: "nasleduje po replikácii DNA",
    G: "prebieha bez replikácie DNA",
    H: "znižuje počet chromozómov"
  },
  correct: ["B","D","G"]
},

{
  id: 82,
  text: "82. Diferenciácia buniek je:",
  choices: {
    A: "stimulácia buniek",
    B: "totipotencia",
    C: "tvarové a funkčné odlíšenie buniek",
    D: "špecializácia buniek",
    E: "rozmnožovanie buniek",
    F: "autoregulácia",
    G: "vznik identických buniek",
    H: "vznik špecializovaných buniek"
  },
  correct: ["C","D","H"]
},

{
  id: 83,
  text: "83. Bunkové kultúry sa získavajú:",
  choices: {
    A: "pestovaním buniek in vivo",
    B: "pestovaním buniek in vitro",
    C: "diferenciáciou buniek",
    D: "pestovaním buniek mimo organizmu",
    E: "delením buniek v tele",
    F: "mitózou v organizme",
    G: "kultiváciou tkanív",
    H: "delením buniek v prírode"
  },
  correct: ["B","D","G"]
},

{
  id: 84,
  text: "84. Bunková diferenciácia znamená:",
  choices: {
    A: "tvarové odlíšenie buniek",
    B: "funkčné odlíšenie buniek",
    C: "genetické odlíšenie buniek",
    D: "morfologické odlíšenie buniek",
    E: "tvarové a funkčné odlíšenie",
    F: "vznik až po narodení",
    G: "realizáciu celej genetickej informácie",
    H: "špecializáciu buniek"
  },
  correct: ["A","B","D","E","H"]
},

{
  id: 85,
  text: "85. Diferencovaná bunka:",
  choices: {
    A: "má aktivované len niektoré gény",
    B: "má aktivované všetky gény",
    C: "je totipotentná",
    D: "obsahuje úplnú genetickú informáciu",
    E: "má len časť genetickej informácie",
    F: "je embryonálna",
    G: "je funkčne špecializovaná",
    H: "má typický tvar"
  },
  correct: ["A","D","G","H"]
},

{
  id: 86,
  text: "86. Bunková stena:",
  choices: {
    A: "je selektívne priepustná",
    B: "je permeabilná",
    C: "tvorí osmotickú bariéru",
    D: "je produktom protoplastu",
    E: "má vyživovaciu funkciu",
    F: "udržiava tvar bunky",
    G: "je semipermeabilná",
    H: "obsahuje pektíny"
  },
  correct: ["B","D","F"]
},

{
  id: 87,
  text: "87. Rozkladné procesy v živočíšnych bunkách zabezpečujú:",
  choices: {
    A: "amyloplasty",
    B: "Golgiho aparát",
    C: "vakuoly",
    D: "cytoplazma",
    E: "hladké ER",
    F: "zrnité ER",
    G: "lyzozómy",
    H: "hydrolytické enzýmy"
  },
  correct: ["G","H"]
},

{
  id: 88,
  text: "88. Rozkladné procesy v rastlinných bunkách zabezpečujú:",
  choices: {
    A: "amyloplasty",
    B: "lyzozómy",
    C: "vakuoly",
    D: "tonoplast",
    E: "plastidové ribozómy",
    F: "hladké ER",
    G: "ribozómy",
    H: "hydrolytické enzýmy"
  },
  correct: ["C","H"]
},

{
  id: 89,
  text: "89. V chloroplastoch prebieha:",
  choices: {
    A: "fotosyntéza",
    B: "rozklad látok",
    C: "syntéza bielkovín",
    D: "glykolýza",
    E: "Krebsov cyklus",
    F: "syntéza polysacharidov",
    G: "syntéza nukleových kyselín",
    H: "Calvinov cyklus"
  },
  correct: ["A","F","H"]
},

{
  id: 90,
  text: "90. Rastlinné bunky sú spojené:",
  choices: {
    A: "pletivami",
    B: "mikrotubulmi",
    C: "cytoskeletom",
    D: "plazmodezmami",
    E: "amyloplastami",
    F: "plazmidmi",
    G: "tonoplastmi",
    H: "pórmi"
  },
  correct: ["D"]
{
  id: 91,
  text: "91. Vakuoly:",
  choices: {
    A: "sú obalené permeabilným tonoplastom",
    B: "sú vyplnené bunkovou šťavou",
    C: "sú vyplnené cytoplazmou",
    D: "obsahujú hydrolytické enzýmy",
    E: "majú na povrchu tonoplast",
    F: "sú oddelené semipermeabilnou membránou",
    G: "sú produktom protoplastu",
    H: "vypĺňajú strómu"
  },
  correct: ["B","E","F","G"]
},

{
  id: 92,
  text: "92. V jadrovom obale sa nachádzajú:",
  choices: {
    A: "mikrotubuly",
    B: "otvory",
    C: "plazmodezmy",
    D: "protoplasty",
    E: "peptidoglykán",
    F: "pektíny",
    G: "lignín",
    H: "jadrové póry"
  },
  correct: ["B","H"]
},

{
  id: 93,
  text: "93. Rastlinná bunka sa odlišuje tým, že má:",
  choices: {
    A: "mitochondrie",
    B: "plastidy",
    C: "ribozómy",
    D: "vakuoly",
    E: "drsné ER",
    F: "bunkovú stenu",
    G: "lyzozómy",
    H: "mikrotubuly"
  },
  correct: ["B","D","F"]
},

{
  id: 94,
  text: "94. Tylakoidy:",
  choices: {
    A: "sú v mitochondriách",
    B: "sú v stróme chloroplastov",
    C: "sú v cytoplazme baktérií",
    D: "sú membránové organely",
    E: "sú súčasťou Golgiho aparátu",
    F: "sú súčasťou chloroplastov",
    G: "viažu chlorofyl",
    H: "sú v cyanobaktériách"
  },
  correct: ["B","F","G","H"]
},

{
  id: 95,
  text: "95. Bičíky eukaryotických buniek:",
  choices: {
    A: "majú 9 trojíc mikrotubulov",
    B: "sú obalené membránou",
    C: "sú zakotvené v bunkovej stene",
    D: "sú tvorené mikrotubulmi",
    E: "obsahujú kolagén",
    F: "sú zakotvené v bazálnom teliesku",
    G: "majú pelikulu",
    H: "slúžia na pohyb"
  },
  correct: ["B","D","F","H"]
},

{
  id: 96,
  text: "96. Bunky živočíchov:",
  choices: {
    A: "sú eukaryotické",
    B: "sú prokaryotické",
    C: "majú membránové organely",
    D: "majú lyzozómy",
    E: "majú pelikulu",
    F: "majú plazmodezmy",
    G: "obsahujú melanín",
    H: "delia sa amitózou"
  },
  correct: ["A","C","D"]
},

{
  id: 97,
  text: "97. K fibrilárnym štruktúram patria:",
  choices: {
    A: "nervové vlákna",
    B: "mikrofilamenty",
    C: "cytoskelet",
    D: "myofibrily",
    E: "mikrotubuly",
    F: "tonofibrily",
    G: "brvy",
    H: "bičíky"
  },
  correct: ["A","B","D","F","G","H"]
},

{
  id: 98,
  text: "98. Lyzozómy:",
  choices: {
    A: "regulujú príjem látok",
    B: "sú transportné vezikuly",
    C: "obsahujú tráviace enzýmy",
    D: "sú typické pre živočíšne bunky",
    E: "sú typické pre rastliny",
    F: "fungujú v prokaryotách",
    G: "rozkladajú cudzie látky",
    H: "rozkladajú nepotrebné látky"
  },
  correct: ["C","D","G","H"]
},

{
  id: 99,
  text: "99. Mikrotubuly v bičíku:",
  choices: {
    A: "sú v 9 trojiciach",
    B: "sú uložené priečne",
    C: "majú usporiadanie 9+2",
    D: "majú 9 dvojíc + 2 centrálne",
    E: "majú 11 dvojíc",
    F: "sú náhodné",
    G: "majú usporiadanie 9+3",
    H: "sú v centrálnej rovine"
  },
  correct: ["C","D"]
},

{
  id: 100,
  text: "100. V rastlinných bunkách sa nenachádzajú:",
  choices: {
    A: "lyzozómy",
    B: "neurofibrily",
    C: "tonofibrily",
    D: "hydrolytické enzýmy",
    E: "tonoplast",
    F: "jadierka",
    G: "plazmodezmy",
    H: "myofibrily"
  },
  correct: ["A","B","C","H"]
{
  id: 101,
  text: "101. Tonoplast:",
  choices: {
    A: "je na povrchu leukoplastov",
    B: "je priepustná membrána vakuoly",
    C: "je polopriepustná membrána vakuoly",
    D: "je semipermeabilný",
    E: "je na povrchu lyzozómov",
    F: "obaľuje vakuoly",
    G: "je na povrchu transportných vezikúl",
    H: "oddeľuje obsah vakuoly od cytoplazmy"
  },
  correct: ["C","D","F","H"]
},

{
  id: 102,
  text: "102. V stróme chloroplastov sa nachádzajú:",
  choices: {
    A: "tylakoidy",
    B: "kruhové molekuly DNA",
    C: "chromatín",
    D: "lineárne molekuly DNA",
    E: "hydrolytické enzýmy",
    F: "bunková šťava",
    G: "karotenoidy",
    H: "plastidové ribozómy"
  },
  correct: ["B","H"]
},

{
  id: 103,
  text: "103. Podľa bunkovej teórie:",
  choices: {
    A: "bunka je najmenšia živá jednotka",
    B: "všetky bunky majú rovnaké zloženie",
    C: "každá bunka vzniká z inej bunky",
    D: "živé bunky majú rovnaké zloženie ako neživé",
    E: "bunka je základom organizmov",
    F: "bunky sú tvorené anorganickými látkami",
    G: "bunky sú otvorené sústavy",
    H: "bunky uchovávajú genetickú informáciu"
  },
  correct: ["A","C","E","G","H"]
},

{
  id: 104,
  text: "104. Prvú evolučnú teóriu sformuloval:",
  choices: {
    A: "G. Treviranus",
    B: "Charles Darwin",
    C: "J. B. Lamarck",
    D: "L. Pasteur",
    E: "C. Linné",
    F: "C. Woese",
    G: "W. Harvey",
    H: "J. B. Lamarck (1809)"
  },
  correct: ["C","H"]
},

{
  id: 105,
  text: "105. Správne tvrdenia:",
  choices: {
    A: "Lamarck vytvoril binomickú nomenklatúru",
    B: "Pasteur vyvrátil samoplozenie",
    C: "Schleiden založil systematiku",
    D: "Schwann je autor bunkovej teórie",
    E: "Woese zaviedol dvojmenné názvy",
    F: "Hooke použil mikroskop",
    G: "Mendel objasnil DNA",
    H: "Leeuwenhoek zaviedol pojem biológia"
  },
  correct: ["B","D","F"]
},

{
  id: 106,
  text: "106. Bunkovú teóriu formulovali:",
  choices: {
    A: "R. Hooke",
    B: "A. Leeuwenhoek",
    C: "M. J. Schleiden",
    D: "L. Pasteur",
    E: "J. E. Purkyně",
    F: "T. Schwann",
    G: "M. Malpighi",
    H: "C. L. Treviranus"
  },
  correct: ["C","F"]
},

{
  id: 107,
  text: "107. Základy anatómie položil:",
  choices: {
    A: "W. Harvey",
    B: "Aristoteles",
    C: "R. Hooke",
    D: "J. E. Purkyně",
    E: "A. Vesalius",
    F: "Galenos",
    G: "R. Virchow",
    H: "M. Malpighi"
  },
  correct: ["E"]
},

{
  id: 108,
  text: "108. Medzi fyziologické vedy patria:",
  choices: {
    A: "fyziológia človeka",
    B: "fyziológia prvkov",
    C: "histológia",
    D: "embryológia",
    E: "vedy o funkcii orgánov",
    F: "fyziológia živočíchov",
    G: "vedy o funkcii organel",
    H: "fyziológia rastlín"
  },
  correct: ["A","E","F","H"]
},

{
  id: 109,
  text: "109. Parazitológia študuje:",
  choices: {
    A: "správanie mikroorganizmov",
    B: "cudzopasné organizmy",
    C: "vzťah organizmov k prostrediu",
    D: "cudzopasné mikroorganizmy",
    E: "dedičnosť mikroorganizmov",
    F: "vzťah parazita a hostiteľa",
    G: "zárodočný vývin",
    H: "biologické zákonitosti parazitizmu"
  },
  correct: ["B","D","F","H"]
},

{
  id: 110,
  text: "110. Štruktúru DNA objasnili:",
  choices: {
    A: "C. Woese",
    B: "v roku 1944",
    C: "v roku 1953",
    D: "F. Crick",
    E: "J. G. Mendel",
    F: "v roku 1866",
    G: "J. D. Watson",
    H: "v roku 1966"
  },
  correct: ["C","D","G"]
},

{
  id: 111,
  text: "111. Funkcie vody v bunke:",
  choices: {
    A: "zásobná",
    B: "konštrukčná",
    C: "zdroj energie",
    D: "reakčné prostredie",
    E: "rozpúšťadlo",
    F: "regulačná",
    G: "termoregulačná",
    H: "stavebná jednotka makromolekúl"
  },
  correct: ["B","D","E","F","G"]
},

{
  id: 112,
  text: "112. Monomér bielkovín je:",
  choices: {
    A: "nukleotid",
    B: "peptid",
    C: "aminoskupina",
    D: "atóm uhlíka",
    E: "aminokyselina",
    F: "dusíkatá báza",
    G: "monosacharid",
    H: "nukleozid"
  },
  correct: ["E"]
},

{
  id: 113,
  text: "113. Väzba medzi aminokyselinami:",
  choices: {
    A: "esterová",
    B: "fosfodiesterová",
    C: "glykozidová",
    D: "peptidová",
    E: "vodíková",
    F: "medzi bázami",
    G: "kovalentná",
    H: "nekovalentná"
  },
  correct: ["D","G"]
},

{
  id: 114,
  text: "114. Funkcie bielkovín:",
  choices: {
    A: "informačná",
    B: "energetická",
    C: "metabolická",
    D: "regulačná",
    E: "mechanická",
    F: "zásobná",
    G: "ochranná",
    H: "štruktúrna"
  },
  correct: ["C","D","E","H"]
},

{
  id: 115,
  text: "115. Monoméry nukleových kyselín sú:",
  choices: {
    A: "aminokyseliny",
    B: "dusíkaté bázy",
    C: "nukleotidy",
    D: "chromatín",
    E: "nukleozidy",
    F: "pentózy",
    G: "ribonukleotidy",
    H: "deoxyribonukleotidy"
  },
  correct: ["C","G","H"]
}
        
      { key:"bio_mikro_116_152", name:"Bunka a mikroorganizmy (116–152)", questions: [
        // 🔽 TU VLOŽÍŠ OTÁZKY 116–152
      ]},
      { key:"bio_fyzio_rastlin_153_250", name:"Fyziológia rastlín (153–250)", questions: [] },
      { key:"bio_fyzio_ziv_I_251_349", name:"Fyziológia živočíchov I. (251–349)", questions: [] },
      { key:"bio_fyzio_ziv_II_350_450", name:"Fyziológia živočíchov II. (350–450)", questions: [] },
      { key:"bio_sustavy_I_451_617", name:"Sústavy človeka I. (451–617)", questions: [] },
      { key:"bio_sustavy_II_618_740", name:"Sústavy človeka II. (618–740)", questions: [] },
      { key:"bio_sustavy_III_741_900", name:"Sústavy človeka III. (741–900)", questions: [] },
      { key:"bio_gen_I_901_1006", name:"Genetika I. (901–1006)", questions: [] },
      { key:"bio_gen_II_1007_1119", name:"Genetika II. (1007–1119)", questions: [] },
      { key:"bio_gen_III_1120_1250", name:"Genetika III. (1120–1250)", questions: [] },
      { key:"bio_system_1251_1500", name:"Systém rastlín a živočíchov, ekológia, evolúcia (1251–1500)", questions: [] },
      { key:"bio_opakovanie_1_1500", name:"OPAKOVANIE (1–1500)", questions: [] },
    ]
  },
  chem: {
    name: "Chémia",
    themes: [
      { key:"chem_zaklady_1_110", name:"Základné pojmy a názvoslovie (1–110)", questions: [] },
      { key:"chem_atom_111_160", name:"Stavba atómu (111–160)", questions: [] },
      { key:"chem_vazby_161_210", name:"Chemické väzby (161–210)", questions: [] },
      { key:"chem_kinetika_211_260", name:"Fyzikálna chémia – kinetika (211–260)", questions: [] },
      { key:"chem_kyseliny_261_315", name:"Kyseliny a zásady (261–315)", questions: [] },
      { key:"chem_reakcie_316_390", name:"Chemické reakcie (316–390)", questions: [] },
      { key:"chem_anorg_391_470", name:"Anorganická chémia – prvky (391–470)", questions: [] },
      { key:"chem_uhlov_641_790", name:"Uhľovodíky (641–790)", questions: [] },
      { key:"chem_deriv_791_940", name:"Deriváty uhľovodíkov (791–940)", questions: [] },
      { key:"chem_karb_941_1040", name:"Karboxylové kyseliny (941–1040)", questions: [] },
      { key:"chem_hetero_1040_1195", name:"Heterocykly, polyméry, lipidy (1040–1195)", questions: [] },
      { key:"chem_sachar_1196_1350", name:"Sacharidy, bielkoviny, aminokyseliny (1196–1350)", questions: [] },
      { key:"chem_nukleo_1351_1500", name:"Nukleové kyseliny, biochémia (1351–1500)", questions: [] },
      { key:"chem_opakovanie_1_1500", name:"OPAKOVANIE (1–1500)", questions: [] },
    ]
  }
};

/**
 * ============================
 * 2) APLIKÁCIA – LOGIKA
 * ============================
 */
const LETTERS_8 = ["A","B","C","D","E","F","G","H"];
const LETTERS_4 = ["A","B","C","D"];

let mode8 = true; // true = 8 možností, false = 4 možnosti
let navLevel = "subject"; // subject | theme | quiz | result
let currentSubjectKey = null; // 'bio'|'chem'
let currentThemeKey = null;
let quiz = null;

function $(id){ return document.getElementById(id); }

function setModeUI(){
  const switchEl = $("modeSwitch");
  const label = $("modeLabel");
  const lettersNow = $("lettersNow");
  if(mode8){
    switchEl.classList.add("on");
    switchEl.setAttribute("aria-checked","true");
    label.textContent = "Režim: 8 možností";
    lettersNow.textContent = "A–H";
  } else {
    switchEl.classList.remove("on");
    switchEl.setAttribute("aria-checked","false");
    label.textContent = "Režim: 4 možnosti";
    lettersNow.textContent = "A–D";
  }
}

function buildSubjectScreen(){
  $("navTitle").textContent = "Menu";
  $("navBadge").textContent = "Pripravené";
  $("crumbs").innerHTML = 'Si tu: <b>Predmet</b>';
  $("backBtn").style.display = "none";

  const box = $("screenSubject");
  box.style.display = "";
  $("screenThemes").style.display = "none";

  box.innerHTML = "";
  [
    { key:"bio", icon:"🧬" },
    { key:"chem", icon:"⚗️" }
  ].forEach(s=>{
    const subj = QUESTION_BANK[s.key];
    const div = document.createElement("div");
    div.className = "item";
    div.onclick = ()=>openSubject(s.key);
    div.innerHTML = `
      <div>
        <div class="t">${s.icon} ${subj.name}</div>
        <div class="s">${subj.themes.length} tém</div>
      </div>
      <div class="badge">Vybrať</div>
    `;
    box.appendChild(div);
  });

  setQuizIdle();
  navLevel = "subject";
}

function openSubject(subjectKey){
  currentSubjectKey = subjectKey;
  currentThemeKey = null;
  navLevel = "theme";

  const subj = QUESTION_BANK[subjectKey];
  $("navTitle").textContent = subj.name;
  $("navBadge").textContent = "Témy";
  $("crumbs").innerHTML = `Si tu: <b>Predmet</b> → <b>${subj.name}</b>`;
  $("backBtn").style.display = "";

  $("screenSubject").style.display = "none";
  const list = $("screenThemes");
  list.style.display = "";
  list.innerHTML = "";

  subj.themes.forEach(t=>{
    const count = (t.questions || []).length;
    const div = document.createElement("div");
    div.className = "item";
    div.onclick = ()=>startThemeQuiz(subjectKey, t.key);
    div.innerHTML = `
      <div>
        <div class="t">${t.name}</div>
        <div class="s">${count} otázok</div>
      </div>
      <div class="badge">${count ? "Spustiť" : "Prázdne"}</div>
    `;
    list.appendChild(div);
  });

  setQuizIdle(subj.name);
}

function goBack(){
  if(navLevel === "theme"){ buildSubjectScreen(); return; }
  if(navLevel === "quiz" || navLevel === "result"){ goBackToThemes(); return; }
  buildSubjectScreen();
}

function hardReset(){
  // len reset UI stavu (bez vymazania otázok)
  quiz = null;
  currentSubjectKey = null;
  currentThemeKey = null;
  $("resultWrap").style.display = "none";
  $("quizBadge").textContent = "—";
  $("finalBadgeRow").innerHTML = "";
  buildSubjectScreen();
}

function setQuizIdle(subjName){
  $("quizTitle").textContent = subjName ? `${subjName} · vyber tému` : "Vyber predmet a tému";
  $("quizBadge").textContent = "—";
  $("qIndex").textContent = "—";
  $("scoreNow").textContent = "0";
  $("qText").textContent = "Tu sa zobrazí otázka.";
  $("choices").innerHTML = "";
  $("progressBar").style.width = "0%";
  $("checkBtn").disabled = true;
  $("skipBtn").disabled = true;
  $("finishBtn").disabled = true;
  $("resultWrap").style.display = "none";
}

/**
 * ============================
 * 3) KVÍZ (miešanie v rámci témy, nie naprieč témami)
 * ============================
 */
function startThemeQuiz(subjectKey, themeKey){
  const subj = QUESTION_BANK[subjectKey];
  const theme = subj.themes.find(t=>t.key===themeKey);
  currentThemeKey = themeKey;

  // V opakovaní chceš mix, ale v rámci témy chceš tiež miešať (len vnútri témy).
  // Tu miešame VŽDY len otázky z vybranej témy.
  const original = (theme.questions || []).slice();
  const shuffled = shuffle(original);

  quiz = {
    subjectKey,
    themeKey,
    themeName: theme.name,
    questions: shuffled,
    i: 0,
    score: 0,
    maxScore: 0, // súčet počtu správnych možností podľa režimu (4/8)
    answered: 0
  };

  // maxScore počítame podľa režimu (ak režim 4, tak sa berú len A–D a aj correct sa filtruje)
  quiz.maxScore = shuffled.reduce((sum, q)=> sum + getCorrectLetters(q).length, 0);

  navLevel = "quiz";
  $("quizTitle").textContent = theme.name;
  $("quizBadge").textContent = "Test";
  $("resultWrap").style.display = "none";

  $("checkBtn").disabled = shuffled.length === 0;
  $("skipBtn").disabled = shuffled.length === 0;
  $("finishBtn").disabled = shuffled.length === 0;

  renderQuestion();
}

function getLetters(){
  return mode8 ? LETTERS_8 : LETTERS_4;
}

function getCorrectLetters(q){
  const allowed = new Set(getLetters());
  const corr = Array.isArray(q.correct) ? q.correct : [];
  return corr.filter(x=>allowed.has(x));
}

function getChoiceText(q, letter){
  // ak v režime 4, stále používame A–D
  return (q.choices && q.choices[letter]) ? q.choices[letter] : "";
}

function renderQuestion(){
  const list = quiz.questions;
  const total = list.length;

  $("resultWrap").style.display = "none";

  if(total === 0){
    $("qIndex").textContent = "0 / 0";
    $("qText").textContent = "Táto téma zatiaľ nemá otázky. Najprv ich vlož do QUESTION_BANK.";
    $("choices").innerHTML = "";
    $("progressBar").style.width = "0%";
    $("checkBtn").disabled = true;
    $("skipBtn").disabled = true;
    $("finishBtn").disabled = true;
    return;
  }

  if(quiz.i >= total){
    finishQuiz();
    return;
  }

  const q = list[quiz.i];
  const letters = getLetters();

  $("qIndex").textContent = `${quiz.i+1} / ${total}`;
  $("scoreNow").textContent = `${quiz.score}`;
  $("progressBar").style.width = `${Math.round((quiz.i/total)*100)}%`;

  $("qText").textContent = q.text || "(chýba text otázky)";

  const ch = $("choices");
  ch.innerHTML = "";

  letters.forEach(L=>{
    const txt = getChoiceText(q, L);
    const div = document.createElement("label");
    div.className = "choice" + (txt ? "" : " small");
    div.innerHTML = `
      <input type="checkbox" value="${L}" ${txt ? "" : "disabled"} />
      <div class="lbl">${L}</div>
      <div class="tx">${txt ? txt : "— (nevyplnené)"}</div>
    `;
    ch.appendChild(div);
  });
}

function readSelected(){
  const inputs = $("choices").querySelectorAll('input[type="checkbox"]');
  const picked = [];
  inputs.forEach(i=>{ if(i.checked) picked.push(i.value); });
  return picked;
}

/**
 * Bodovanie (čiastočné body):
 * +1 za každú správnu možnosť, ktorú si označila.
 * 0 bodov za nesprávne označenia (žiadne mínus body).
 * => ak správnych je 4 a označíš 3 správne, máš 3 body.
 */
function scoreAnswer(selected, correct){
  const correctSet = new Set(correct);
  let pts = 0;
  selected.forEach(s=>{ if(correctSet.has(s)) pts += 1; });
  return pts;
}

function checkAndNext(){
  if(!quiz) return;

  const q = quiz.questions[quiz.i];
  const selected = readSelected();
  const correct = getCorrectLetters(q);

  const pts = scoreAnswer(selected, correct);
  quiz.score += pts;
  quiz.answered += 1;

  quiz.i += 1;
  renderQuestion();
}

function skipQuestion(){
  if(!quiz) return;
  quiz.i += 1;
  renderQuestion();
}

function finishQuiz(){
  if(!quiz) return;

  const totalQ = quiz.questions.length;
  const max = quiz.maxScore || 0;
  const got = quiz.score || 0;

  const pct = max > 0 ? Math.round((got / max) * 100) : 0;

  $("resultWrap").style.display = "";
  $("finalScore").textContent = `${got} / ${max}`;
  $("finalPct").textContent = `${pct}%`;
  $("finalCount").textContent = `${totalQ}`;
  $("finalMode").textContent = mode8 ? "8 možností (A–H)" : "4 možnosti (A–D)";

  $("progressBar").style.width = "100%";
  $("qText").textContent = "Vyhodnotenie testu";
  $("choices").innerHTML = "";

  // badge
  $("finalBadgeRow").innerHTML = renderBadge(pct);

  $("checkBtn").disabled = true;
  $("skipBtn").disabled = true;
  $("finishBtn").disabled = true;

  navLevel = "result";
}

function renderBadge(pct){
  let cls = "warn", text = "Pokračuj ďalej 💪";
  if(pct >= 85){ cls="good"; text="Výborne! 🔥"; }
  else if(pct >= 70){ cls="good"; text="Super! ✅"; }
  else if(pct >= 50){ cls="warn"; text="Dá sa, ešte dotiahnuť. ✨"; }
  else { cls="bad"; text="Nevadí, skúsiť znova. 💙"; }
  return `<span class="badge ${cls}">${text}</span>`;
}

function restartSameTheme(){
  if(!quiz) return;
  startThemeQuiz(quiz.subjectKey, quiz.themeKey);
}

function goBackToThemes(){
  if(!currentSubjectKey) { buildSubjectScreen(); return; }
  openSubject(currentSubjectKey);
  $("resultWrap").style.display = "none";
  navLevel = "theme";
}

/**
 * ============================
 * 4) HELPERS
 * ============================
 */
function shuffle(arr){
  // Fisher–Yates
  const a = arr.slice();
  for(let i=a.length-1; i>0; i--){
    const j = Math.floor(Math.random() * (i+1));
    [a[i], a[j]] = [a[j], a[i]];
  }
  return a;
}

/**
 * ============================
 * 5) MODE SWITCH EVENTS
 * ============================
 */
function toggleMode(){
  mode8 = !mode8;
  setModeUI();

  // ak práve beží test, prepočítame maxScore podľa nového režimu a prekreslíme otázku
  if(quiz){
    quiz.maxScore = quiz.questions.reduce((sum, q)=> sum + getCorrectLetters(q).length, 0);
    $("scoreNow").textContent = `${quiz.score}`;
    renderQuestion();
  }
}

$("modeSwitch").addEventListener("click", toggleMode);
$("modeSwitch").addEventListener("keydown", (e)=>{
  if(e.key === "Enter" || e.key === " "){
    e.preventDefault();
    toggleMode();
  }
});

setModeUI();
buildSubjectScreen();

/**
 * ============================
 * 6) (Voliteľné) Rýchla kontrola, či máš chybný formát otázok
 * ============================
 * Ak by si vložila otázku zle (chýba zátvorka/čiarka), stránka by nabehneť nemusela.
 * Preto odporúčam vkladať otázky po menších dávkach.
 */
</script>
</body>
</html>
