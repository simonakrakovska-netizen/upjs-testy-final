<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>BioCh√©mia ‚Äì Testy</title>
<style>
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#0e1630;
  color:#fff;
}
.container{max-width:1000px;margin:auto;padding:20px;}
.card{background:#16204a;border-radius:15px;padding:20px;margin-bottom:15px;}
h1,h2{margin:0 0 10px}
.btn{padding:10px 15px;border-radius:10px;border:none;cursor:pointer;background:#3b82f6;color:white;font-weight:bold}
.btn:hover{opacity:.9}
.list div{padding:10px;border:1px solid #2a3a7a;margin:6px 0;border-radius:10px;cursor:pointer}
.list div:hover{background:#1f2f6d}
.choice{margin:5px 0}
.progress{height:8px;background:#333;border-radius:5px;overflow:hidden}
.bar{height:100%;background:#4ade80;width:0%}
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<h1>üß† Bio & Ch√©mia ‚Äì Testy</h1>

<div class="card" id="menu">
  <h2>Vyber predmet</h2>
  <div class="list">
    <div onclick="openSubject('bio')">üß¨ Biol√≥gia</div>
    <div onclick="openSubject('chem')">‚öóÔ∏è Ch√©mia</div>
  </div>
</div>

<div class="card hidden" id="themes">
  <h2 id="themeTitle"></h2>
  <div class="list" id="themeList"></div>
  <button class="btn" onclick="backToMenu()">‚¨Ö Sp√§≈•</button>
</div>

<div class="card hidden" id="quiz">
  <h2 id="qTitle"></h2>
  <div class="progress"><div id="bar" class="bar"></div></div>
  <p id="qText"></p>
  <div id="choices"></div>
  <br>
  <button class="btn" onclick="next()">ƒéalej</button>
</div>

<div class="card hidden" id="result">
  <h2>V√Ωsledok</h2>
  <p id="score"></p>
  <button class="btn" onclick="location.reload()">Sp√§≈• na menu</button>
</div>

</div>

<script>
/* =========================
   D√ÅTA ‚Äì TU SA D√ÅVAJ√ö OT√ÅZKY
   ========================= */

const DATA = {
  bio: {
    name: "Biol√≥gia",
    themes: [
      { name:"≈†trukt√∫ra bunky", questions: [] },
      { name:"Bunka a mikroorganizmy", questions: [] },
      { name:"Fyziol√≥gia rastl√≠n", questions: [] },
      { name:"Fyziol√≥gia ≈æivoƒç√≠chov I.", questions: [] },
      { name:"Fyziol√≥gia ≈æivoƒç√≠chov II.", questions: [] },
      { name:"S√∫stavy ƒçloveka I.", questions: [] },
      { name:"S√∫stavy ƒçloveka II.", questions: [] },
      { name:"S√∫stavy ƒçloveka III.", questions: [] },
      { name:"Genetika I.", questions: [] },
      { name:"Genetika II.", questions: [] },
      { name:"Genetika III.", questions: [] },
      { name:"Syst√©m rastl√≠n a ≈æivoƒç√≠chov", questions: [] }
    ]
  },

  chem: {
    name: "Ch√©mia",
    themes: [
      { name:"Z√°klady ch√©mie", questions: [] },
      { name:"Stavba at√≥mu", questions: [] },
      { name:"Chemick√© v√§zby", questions: [] },
      { name:"Fyzik√°lna ch√©mia", questions: [] },
      { name:"Kyseliny a z√°sady", questions: [] },
      { name:"Reakcie", questions: [] },
      { name:"Anorganick√° ch√©mia", questions: [] },
      { name:"Uhƒæovod√≠ky", questions: [] },
      { name:"Deriv√°ty", questions: [] },
      { name:"Biomolekuly", questions: [] }
    ]
  }
};

let currentSubject = null;
let currentTheme = null;
let qIndex = 0;
let score = 0;

/* ========================= */

function openSubject(key){
  currentSubject = DATA[key];
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("themes").classList.remove("hidden");
  document.getElementById("themeTitle").innerText = currentSubject.name;

  const list = document.getElementById("themeList");
  list.innerHTML = "";

  currentSubject.themes.forEach((t,i)=>{
    const d = document.createElement("div");
    d.innerText = t.name;
    d.onclick = ()=>startTheme(i);
    list.appendChild(d);
  });
}

function backToMenu(){
  document.getElementById("themes").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}

function startTheme(i){
  currentTheme = currentSubject.themes[i];
  qIndex = 0;
  score = 0;

  document.getElementById("themes").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");

  if(currentTheme.questions.length === 0){
    document.getElementById("qText").innerText =
      "T√°to t√©ma zatiaƒæ nem√° ot√°zky.";
    return;
  }
  showQuestion();
}

function showQuestion(){
  const q = currentTheme.questions[qIndex];
  document.getElementById("qTitle").innerText =
    `Ot√°zka ${qIndex+1} / ${currentTheme.questions.length}`;
  document.getElementById("qText").innerText = q.text;

  const box = document.getElementById("choices");
  box.innerHTML = "";

  Object.entries(q.answers).forEach(([k,v])=>{
    const div = document.createElement("div");
    div.className = "choice";
    div.innerHTML = `<input type="checkbox" value="${k}"> ${k}) ${v}`;
    box.appendChild(div);
  });

  document.getElementById("bar").style.width =
    ((qIndex/currentTheme.questions.length)*100)+"%";
}

function next(){
  if(!currentTheme.questions.length) return;

  const checked = [...document.querySelectorAll("input:checked")]
    .map(x=>x.value);

  const correct = currentTheme.questions[qIndex].correct;
  checked.forEach(v=>{
    if(correct.includes(v)) score++;
  });

  qIndex++;
  if(qIndex >= currentTheme.questions.length){
    finish();
  } else {
    showQuestion();
  }
}

function finish(){
  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
  document.getElementById("score").innerText =
    `Sk√≥re: ${score} bodov`;
}
</script>
</body>
</html>
