<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>Testy</title>
<style>
body{font-family:Arial;background:#0f172a;color:white;padding:20px}
button{padding:10px 15px;margin:5px;border-radius:8px;border:none;background:#3b82f6;color:white;cursor:pointer}
button:hover{background:#2563eb}
.box{max-width:700px;margin:auto}
.choice{margin:6px 0}
</style>
</head>
<body>

<div class="box" id="menu">
  <h2>Vyber predmet</h2>
  <button onclick="openSubject('bio')">Biológia</button>
  <button onclick="openSubject('chem')">Chémia</button>
</div>

<div class="box" id="themes" style="display:none">
  <h2 id="themeTitle"></h2>
  <button onclick="startTest('bio')">Bunka a mikroorganizmy</button>
  <button onclick="backToMenu()">⬅ Späť</button>
</div>

<div class="box" id="test" style="display:none">
  <h3 id="question"></h3>
  <div id="answers"></div>
  <button onclick="next()">Ďalej</button>
</div>

<div class="box" id="result" style="display:none">
  <h2>Výsledok</h2>
  <p id="scoreText"></p>
  <button onclick="location.reload()">Znova</button>
</div>

<script>
let index = 0;
let score = 0;
let current = [];

const bioQuestions = [
{
  q: "1. Prokaryotická bunka:",
  a: {
    A:"má jadro",
    B:"nemá jadro",
    C:"má mitochondrie",
    D:"má ribozómy",
    E:"má jadierko",
    F:"má bunkovú stenu",
    G:"má chloroplasty",
    H:"má kruhovú DNA"
  },
  c:["B","D","F","H"]
},
{
  q: "2. Cytoplazmatická membrána:",
  a: {
    A:"je semipermeabilná",
    B:"je z celulózy",
    C:"je z fosfolipidov",
    D:"nemá funkciu",
    E:"obsahuje bielkoviny",
    F:"je len u rastlín",
    G:"riadi transport",
    H:"je pevná"
  },
  c:["A","C","E","G"]
}
];

function openSubject(){
  document.getElementById("menu").style.display="none";
  document.getElementById("themes").style.display="block";
  document.getElementById("themeTitle").innerText = "Biológia";
}

function backToMenu(){
  document.getElementById("themes").style.display="none";
  document.getElementById("menu").style.display="block";
}

function startTest(){
  index = 0;
  score = 0;
  current = bioQuestions;
  document.getElementById("themes").style.display="none";
  document.getElementById("test").style.display="block";
  showQuestion();
}

function showQuestion(){
  const q = current[index];
  document.getElementById("question").innerText = q.q;

  const box = document.getElementById("answers");
  box.innerHTML = "";

  for(let k in q.a){
    box.innerHTML += `
      <div class="choice">
        <label>
          <input type="checkbox" value="${k}">
          ${k}) ${q.a[k]}
        </label>
      </div>`;
  }
}

function next(){
  const selected = [...document.querySelectorAll("input:checked")]
                  .map(x => x.value);

  const correct = current[index].c;

  selected.forEach(x=>{
    if(correct.includes(x)) score++;
  });

  index++;

  if(index >= current.length){
    document.getElementById("test").style.display="none";
    document.getElementById("result").style.display="block";
    document.getElementById("scoreText").innerText =
      `Získal/a si ${score} bodov z ${countMax()} možných`;
  } else {
    showQuestion();
  }
}

function countMax(){
  let sum = 0;
  current.forEach(q => sum += q.c.length);
  return sum;
}
</script>

</body>
</html>
