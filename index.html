<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>UPJ≈† Testy</title>
<style>
body{font-family:Arial;background:#0f172a;color:white;padding:20px}
h1,h2{margin:5px 0}
button{padding:10px 14px;margin:5px;border:none;border-radius:6px;cursor:pointer}
.card{background:#1e293b;padding:15px;border-radius:10px;margin-bottom:15px}
.choice{margin:6px 0}
.hidden{display:none}
</style>
</head>
<body>

<h1>UPJ≈† ‚Äì Testy</h1>

<div id="menu" class="card">
  <h2>Vyber predmet</h2>
  <button onclick="openSubject('bio')">üß¨ Biol√≥gia</button>
  <button onclick="openSubject('chem')">‚öóÔ∏è Ch√©mia</button>
</div>

<div id="themes" class="card hidden">
  <h2 id="themeTitle"></h2>
  <div id="themeList"></div>
  <button onclick="backToMenu()">‚¨Ö Sp√§≈•</button>
</div>

<div id="quiz" class="card hidden">
  <h3 id="questionText"></h3>
  <div id="choices"></div>
  <button onclick="nextQuestion()">ƒéalej</button>
</div>

<div id="result" class="card hidden">
  <h2>V√Ωsledok</h2>
  <p id="scoreText"></p>
  <button onclick="location.reload()">Nov√Ω test</button>
</div>

<script>
const QUESTION_BANK = {
  bio: {
    name: "Biol√≥gia",
    themes: [
      {
        name: "≈†trukt√∫ra bunky (1‚Äì115)",
        questions: [
          {
            text: "1. Prokaryotick√° bunka:",
            choices: {
              A:"m√° jadro",
              B:"m√° nukleoid",
              C:"m√° mitochondrie",
              D:"m√° riboz√≥my"
            },
            correct:["B","D"]
          }
        ]
      }
    ]
  },
  chem: {
    name: "Ch√©mia",
    themes: [
      { name:"Z√°klady", questions:[] }
    ]
  }
};

let currentQuestions = [];
let index = 0;
let score = 0;

function openSubject(key){
  document.getElementById("menu").classList.add("hidden");
  document.getElementById("themes").classList.remove("hidden");

  const subject = QUESTION_BANK[key];
  document.getElementById("themeTitle").innerText = subject.name;

  const list = document.getElementById("themeList");
  list.innerHTML = "";

  subject.themes.forEach(t=>{
    const btn = document.createElement("button");
    btn.textContent = t.name;
    btn.onclick = () => startTest(t.questions);
    list.appendChild(btn);
  });
}

function backToMenu(){
  document.getElementById("themes").classList.add("hidden");
  document.getElementById("menu").classList.remove("hidden");
}

function startTest(questions){
  currentQuestions = questions;
  index = 0;
  score = 0;

  document.getElementById("themes").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");

  showQuestion();
}

function showQuestion(){
  const q = currentQuestions[index];
  document.getElementById("questionText").innerText = q.text;

  const box = document.getElementById("choices");
  box.innerHTML = "";

  for(let k in q.choices){
    box.innerHTML += `
      <div class="choice">
        <label>
          <input type="checkbox" value="${k}">
          ${k}: ${q.choices[k]}
        </label>
      </div>`;
  }
}

function nextQuestion(){
  const selected = [...document.querySelectorAll("input:checked")].map(x=>x.value);
  const correct = currentQuestions[index].correct;

  selected.forEach(v=>{
    if(correct.includes(v)) score++;
  });

  index++;

  if(index < currentQuestions.length){
    showQuestion();
  } else {
    finish();
  }
}

function finish(){
  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
  document.getElementById("scoreText").innerText =
    `Z√≠skala si ${score} bodov z ${currentQuestions.length}`;
}
</script>

</body>
</html>
