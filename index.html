<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="UTF-8">
<title>Testy ‚Äì Biol√≥gia & Ch√©mia</title>

<style>
body{margin:0;font-family:Segoe UI,sans-serif;background:linear-gradient(120deg,#0b1220,#101a33);color:white}
.container{max-width:950px;margin:auto;padding:20px}
.card{background:#141e3a;border-radius:16px;padding:20px;margin-bottom:15px;box-shadow:0 10px 30px rgba(0,0,0,.4)}
button{padding:10px 14px;border:none;border-radius:10px;background:#3b82f6;color:white;font-weight:bold;cursor:pointer;margin:4px}
button:hover{opacity:.9}
.choice{display:block;padding:10px;margin:6px 0;border-radius:8px;border:1px solid #444}
.progress{height:10px;background:#222;border-radius:10px;overflow:hidden}
.bar{height:100%;width:0%;background:#3b82f6}
.hidden{display:none}
</style>
</head>

<body>
<div class="container">

<div id="menuSubject" class="card">
  <h1>üìò Testy</h1>
  <button onclick="openSubject('bio')">üß¨ Biol√≥gia</button>
  <button onclick="openSubject('chem')">‚öóÔ∏è Ch√©mia</button>
</div>

<div id="menuTheme" class="card hidden">
  <h2 id="themeTitle"></h2>
  <div id="themeList"></div>
  <button onclick="backToSubjects()">‚¨Ö Sp√§≈•</button>
</div>

<div id="quiz" class="card hidden">
  <div class="progress"><div id="bar" class="bar"></div></div>
  <h2 id="question"></h2>
  <div id="answers"></div>
  <button onclick="next()">ƒéalej</button>
</div>

<div id="result" class="card hidden">
  <h2>V√Ωsledok</h2>
  <p id="score"></p>
  <button onclick="location.reload()">Sp√§≈• na menu</button>
</div>

</div>

<script>
const DATA = {
  bio: {
    name: "Biol√≥gia",
    themes: {
      bunka: [],
      mikroorganizmy: [],
      genetika: [],
      clovek: [],
      ekologia: []
    }
  },
  chem: {
    name: "Ch√©mia",
    themes: {
      zaklady: [],
      atom: [],
      vazby: [],
      reakcie: [],
      organicka: []
    }
  }
};

let currentQuestions = [];
let index = 0;
let score = 0;

function openSubject(sub){
  document.getElementById("menuSubject").classList.add("hidden");
  document.getElementById("menuTheme").classList.remove("hidden");
  const t = DATA[sub];
  document.getElementById("themeTitle").innerText = t.name;
  const list = document.getElementById("themeList");
  list.innerHTML = "";
  for(let k in t.themes){
    const b = document.createElement("button");
    b.innerText = k;
    b.onclick = ()=>startQuiz(t.themes[k]);
    list.appendChild(b);
  }
}

function backToSubjects(){
  document.getElementById("menuTheme").classList.add("hidden");
  document.getElementById("menuSubject").classList.remove("hidden");
}

function startQuiz(q){
  currentQuestions = q;
  index = 0;
  score = 0;
  document.getElementById("menuTheme").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");
  showQuestion();
}

function showQuestion(){
  if(index >= currentQuestions.length){
    finish();
    return;
  }
  const q = currentQuestions[index];
  document.getElementById("question").innerText = q.q;
  const box = document.getElementById("answers");
  box.innerHTML = "";
  for(let k in q.a){
    box.innerHTML += `
      <label class="choice">
        <input type="checkbox" value="${k}">
        ${k}: ${q.a[k]}
      </label>`;
  }
  document.getElementById("bar").style.width =
    (index / currentQuestions.length * 100) + "%";
}

function next(){
  const q = currentQuestions[index];
  document.querySelectorAll("input:checked").forEach(i=>{
    if(q.c.includes(i.value)) score++;
  });
  index++;
  showQuestion();
}

function finish(){
  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("result").classList.remove("hidden");
  document.getElementById("score").innerText =
    "Z√≠skan√© body: " + score;
}
</script>
</body>
</html>
